import*as e from"@wordpress/interactivity";var t={d:(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const r=(o={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},n={},t.d(n,o),n),{state:s}=(0,r.store)("feedback-block",{state:{isFormHidden:!0,isFormProcessing:!1,currentlySelected:"",hasSuccess:!1,hasError:!1,formMessage:"",get hasSuccess(){const{status:e}=(0,r.getContext)();return"success"===e},get hasError(){const{status:e}=(0,r.getContext)();return"error"===e},get formMessage(){const{status:e}=(0,r.getContext)();return"success"===e?"Success!":"error"===e?"Error!":void 0}},actions:{*submitForm(e){const t=(0,r.getContext)(),{ref:s}=(0,r.getElement)();e.preventDefault();const o=new FormData(s);o.append("action","submit_feedback"),o.append("nonce",t.nonce),o.append("postId",t.postId),t.isFormProcessing=!0;try{yield fetch(t.ajaxUrl,{method:"POST",credentials:"same-origin",body:o}).then((e=>e.text())),t.status="success"}catch(e){console.error("Error:",e),t.status="error"}},toggleForm(){const e=(0,r.getContext)(),t=(0,r.getElement)();e.isSelected=!e.isSelected,e.isFormHidden=!e.isFormHidden,e.isFormHidden?e.currentlySelected="":e.currentlySelected=t.attributes["data-checked-value"]}},callbacks:{focusField(){const{isFormHidden:e}=(0,r.getContext)(),{ref:t}=(0,r.getElement)();e&&t.querySelector("textarea").focus()}}});var o,n;